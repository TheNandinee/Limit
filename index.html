<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Limit | Smart Spending Guardrails</title>
    <!-- React & Babel CDNs -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap');

        :root {
            --bg: #010103;
            --surface: #0a0a0c;
            --border: #1f1f27;
            --accent-primary: #8b5cf6; 
            --success: #10b981;
            --danger: #ef4444;
            --text-main: #f8fafc;
            --text-muted: #71717a;
        }

        body {
            margin: 0;
            background-color: var(--bg);
            color: var(--text-main);
            font-family: 'Manrope', sans-serif;
            overflow: hidden;
            font-size: 13px; /* Institutional scale to prevent "zoomed-in" feel */
        }

        .font-mono { font-family: 'JetBrains Mono', monospace; }

        /* --- NEBULA GLASSMORPHISM --- */
        .nebula-card {
            background: rgba(15, 15, 20, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            position: relative;
            overflow: hidden;
            border-radius: 12px;
        }
        
        .nebula-card:hover {
            border-color: rgba(139, 92, 246, 0.3);
            box-shadow: 0 10px 40px -10px rgba(0,0,0,0.5);
        }

        .btn-primary {
            background: var(--accent-primary);
            color: white;
            font-weight: 700;
            border-radius: 8px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 14px rgba(139, 92, 246, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }

        .text-gradient-purple {
            background: linear-gradient(to right, #8b5cf6, #d946ef);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* --- ANIMATIONS --- */
        .reveal {
            opacity: 0;
            transform: translateY(15px);
            transition: all 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .scan-line {
            height: 100%; width: 100%;
            background: linear-gradient(to bottom, transparent, var(--accent-primary), transparent);
            opacity: 0.05;
            animation: scan 4s linear infinite;
        }
        @keyframes scan { from { transform: translateY(-100%); } to { transform: translateY(100%); } }

        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #3f3f46; border-radius: 10px; }

        .cursor-none { cursor: none !important; }

        .zk-wire {
            stroke-dasharray: 10;
            animation: dash 20s linear infinite;
        }
        @keyframes dash { from { stroke-dashoffset: 200; } to { stroke-dashoffset: 0; } }

        @keyframes subtle-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        .pulse-soft { animation: subtle-pulse 3s infinite ease-in-out; }

        .ticker-move {
            display: inline-block;
            white-space: nowrap;
            animation: ticker 30s linear infinite;
        }
        @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
    </style>
</head>
<body class="cursor-none">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { 
            Shield, Activity, Plus, Hexagon, Fingerprint, 
            ArrowRight, Sparkles, Trophy, Flame, Users, 
            LockKeyhole, Award, Zap, X, ChevronRight,
            AlertTriangle, CheckCircle2, Lock, Wallet, Loader2,
            Cpu, ChevronsDown, Layers, FileClock, Info, Trash2,
            User, Bell, ArrowLeft, Gift, Search, RefreshCcw,
            ArrowUpRight, ArrowDownLeft, Copy
        } = lucide;

        // --- DATA CONSTANTS ---
        const INITIAL_LOGS = [
            { id: 1, text: "Identity Matrix Established", time: "2h ago", type: "success" },
            { id: 2, text: "Privacy Shield Verified", time: "5h ago", type: "neutral" },
            { id: 3, text: "Spending Rule #04 Active", time: "8h ago", type: "success" }
        ];

        const SBT_ARCHIVE = [
            { id: 'SBT-01', name: 'Iron Will', tier: 'Soulbound', color: 'from-purple-600 to-blue-600', icon: 'shield', desc: 'Maintained budget for 12 months. Non-transferable.' },
            { id: 'SBT-02', name: 'The Anchor', tier: 'Soulbound', color: 'from-cyan-600 to-emerald-600', icon: 'anchor', desc: 'Successfully defended 10+ ETH from impulsive market buys.' },
            { id: 'SBT-03', name: 'V1 Architect', tier: 'Soulbound', color: 'from-fuchsia-600 to-rose-600', icon: 'cpu', desc: 'Protocol founding member identity seal.' }
        ];

        const PENALTIES = [
            { type: "Financial", task: "Burn 0.05 ETH to the protocol null address.", icon: 'flame' },
            { type: "Social", task: "Change display name to 'The Impulsive One' for 24h.", icon: 'user-x' },
            { type: "Effort", task: "Write a 500-word apology to the Community DAO.", icon: 'pen-tool' }
        ];

        const MARKET_DATA = [
            { label: 'ETH/USD', val: '$2,421', change: '+1.2%' },
            { label: 'NETWORK_GAS', val: '12 Gwei', change: 'LOW' },
            { label: 'SAVINGS_AVG', val: '$42/DAY', change: 'STABLE' }
        ];

        const CHALLENGES = [
            { id: 'CG-1', name: 'Coffee Strike', pool: '14 ETH', integrity: 98, icon: 'coffee' },
            { id: 'CG-2', name: 'Jan Detox', pool: '50 ETH', integrity: 100, icon: 'shopping-bag' }
        ];

        // --- HELPERS ---
        const generateHash = () => '0x' + Array.from({length: 32}, () => Math.floor(Math.random() * 16).toString(16)).join('');

        // --- COMPONENTS ---

        const CustomCursor = () => {
            const cursorRef = useRef(null);
            useEffect(() => {
                const move = (e) => {
                    if (cursorRef.current) {
                        cursorRef.current.style.transform = `translate3d(${e.clientX}px, ${e.clientY}px, 0)`;
                    }
                };
                window.addEventListener('mousemove', move);
                return () => window.removeEventListener('mousemove', move);
            }, []);
            return (
                <div ref={cursorRef} className="fixed top-0 left-0 pointer-events-none z-[10000] mix-blend-difference -translate-x-1/2 -translate-y-1/2">
                    <div className="w-2.5 h-2.5 bg-white rounded-full shadow-[0_0_10px_white]" />
                </div>
            );
        };

        const Icon = ({ name, size = 18, className = "" }) => {
            const LucideIcon = { 
                shield: Shield, activity: Activity, plus: Plus, hexagon: Hexagon, fingerprint: Fingerprint,
                zap: Zap, users: Users, award: Award, lock: Lock, search: Search, bell: Bell, info: Info,
                layers: Layers, flame: Flame, trophy: Trophy, gift: Gift, 'user-x': User, 'pen-tool': FileClock,
                anchor: Anchor, cpu: Cpu
            }[name] || Shield;
            return <LucideIcon size={size} className={className} />;
        };

        const FoxIcon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21.83 10.33L19.7 2.11C19.64 1.88 19.33 1.86 19.24 2.08L17.55 6.07L13.16 6.07L13.89 1.63C13.92 1.4 13.67 1.27 13.51 1.41L7.56 6.77L2.17 10.33C1.98 10.46 2.01 10.76 2.22 10.84L7.56 12.87L11.59 21.72C11.69 21.94 12.01 21.94 12.11 21.72L16.44 12.87L21.78 10.84C21.99 10.76 22.02 10.46 21.83 10.33Z" fill="#E2761B"/>
                <path d="M11.85 15.6L12 11.5L16.44 12.87L11.85 15.6Z" fill="#C0AD9E"/>
                <path d="M12.15 15.6L7.56 12.87L12 11.5L12.15 15.6Z" fill="#161616"/>
            </svg>
        );

        const AssetPanel = ({ onClose, onAction }) => (
            <div className="w-[300px] border-r border-white/5 bg-[#070709] flex flex-col h-full animate-in slide-in-from-left-4 duration-500 overflow-hidden relative shadow-2xl z-50 shrink-0">
                <div className="p-8 border-b border-white/5 flex flex-col text-left">
                    <div className="flex justify-between items-center mb-10">
                        <span className="text-[9px] font-black uppercase tracking-widest text-zinc-500">Wealth Registry</span>
                        <button onClick={onClose} className="p-2 hover:bg-white/5 rounded-lg text-zinc-600 transition-all"><X size={16}/></button>
                    </div>
                    
                    <div className="flex items-center gap-4 mb-10">
                        <div className="w-14 h-14 rounded-2xl bg-gradient-to-tr from-purple-500 to-cyan-500 p-0.5 shadow-xl">
                            <div className="w-full h-full rounded-[1rem] bg-[#0c0c0e] flex items-center justify-center">
                                <User size={28} className="text-accent-primary" />
                            </div>
                        </div>
                        <div>
                            <h2 className="text-xl font-black text-white leading-none">Prime Vault</h2>
                            <p className="text-[10px] text-zinc-500 font-mono mt-1 uppercase font-bold tracking-tighter">Verified S3</p>
                        </div>
                    </div>

                    <div className="nebula-card p-6 rounded-2xl bg-white/[0.02] border-white/10 shadow-2xl">
                        <p className="text-[9px] font-black text-zinc-600 uppercase mb-3">Managed Liquidity</p>
                        <h1 className="text-3xl font-black text-white tracking-tighter">14.42 <span className="text-xs text-zinc-500 font-mono uppercase">ETH</span></h1>
                        <div className="grid grid-cols-2 gap-2 mt-6">
                            <button onClick={() => onAction('Deposit process initiated')} className="py-2.5 bg-white/5 border border-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-white/10 text-white transition-all">Deposit</button>
                            <button onClick={() => onAction('Audit Logs Requested')} className="py-2.5 bg-white/5 border border-white/5 rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-white/10 text-white transition-all">History</button>
                        </div>
                    </div>
                </div>

                <div className="flex-1 overflow-y-auto custom-scroll p-8 space-y-12 text-left">
                    <section>
                        <p className="text-[10px] font-black text-zinc-600 uppercase tracking-widest mb-4">Guardrail Assets</p>
                        <div className="space-y-4">
                            {[{n:'NVDA Shard',v:'$10,849',c:'text-success'}, {n:'Locked USDC',v:'$5,000',c:'text-cyan-400'}].map(a => (
                                <div key={a.n} className="flex justify-between items-center p-4 nebula-card rounded-xl border-white/5 hover:border-accent-primary/40 cursor-pointer" onClick={() => onAction(`Detailed stats for ${a.n}`)}>
                                    <div className="flex items-center gap-3">
                                        <div className={`p-1.5 bg-white/5 rounded-lg ${a.c}`}><Layers size={14}/></div>
                                        <div><p className="text-xs font-bold text-white">{a.n}</p></div>
                                    </div>
                                    <p className="text-xs font-mono font-black text-white">{a.v}</p>
                                </div>
                            ))}
                        </div>
                    </section>
                </div>
                <div className="p-8 border-t border-white/5 mt-auto">
                    <button className="w-full py-4 bg-danger/10 border border-danger/30 rounded-2xl text-[10px] font-black uppercase tracking-widest text-danger hover:bg-danger hover:text-white transition-all">Purge Session</button>
                </div>
            </div>
        );

        const DashboardView = ({ stats, logs, onNavigate }) => (
            <div className="space-y-10 animate-in fade-in duration-700 w-full max-w-6xl mx-auto text-left py-4">
                <h1 className="text-4xl font-black text-white tracking-tighter uppercase leading-none">Control Center</h1>
                <div className="grid grid-cols-1 xl:grid-cols-2 gap-8">
                    <div className="nebula-card p-10 shadow-2xl flex flex-col justify-between min-h-[340px] relative overflow-hidden border-purple-500/20">
                        <div className="absolute top-0 right-0 p-12 opacity-5"><Shield size={240}/></div>
                        <div>
                            <p className="text-[11px] font-bold text-purple-400 uppercase tracking-[0.5em] mb-6">Guarded Value</p>
                            <h2 className="text-7xl font-black text-white leading-none tracking-tighter">{stats.tvl.toFixed(2)} <span className="text-2xl text-zinc-600 font-mono tracking-normal uppercase">ETH</span></h2>
                        </div>
                        <div className="flex justify-between pt-12 border-t border-white/5">
                            <div><p className="text-zinc-600 text-[10px] font-black uppercase tracking-widest mb-1">Portfolio Valuation</p><p className="text-3xl font-black text-white tracking-tighter">${(stats.tvl * 2421).toLocaleString()}</p></div>
                            <div className="text-right"><p className="text-zinc-600 text-[10px] font-black uppercase tracking-widest mb-1">Vault Status</p><p className="text-3xl text-success font-black tracking-tight uppercase">Active</p></div>
                        </div>
                    </div>
                    
                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-8">
                        <button onClick={() => onNavigate('ritual')} className="nebula-card p-10 rounded-[3rem] group border-dashed border-zinc-700 flex flex-col justify-between text-left transition-all hover:bg-purple-500/[0.02] shadow-2xl h-full">
                            <div className="w-16 h-16 rounded-[1.25rem] bg-purple-500/10 flex items-center justify-center text-purple-400 group-hover:scale-110 group-hover:bg-purple-500 group-hover:text-white transition-all duration-500 shadow-xl"><Plus size={32}/></div>
                            <h3 className="text-2xl font-black text-white tracking-tight leading-none uppercase">Setup Law</h3>
                        </button>
                        <button onClick={() => onNavigate('vault')} className="nebula-card p-10 rounded-[3rem] bg-gradient-to-br from-purple-500/10 to-transparent flex flex-col justify-between text-left shadow-2xl h-full">
                            <Award className="text-purple-400" size={48}/>
                            <h3 className="text-2xl font-black text-white tracking-tight uppercase leading-none">Identity Archive</h3>
                        </button>
                    </div>
                </div>

                <div className="nebula-card rounded-[2.5rem] overflow-hidden shadow-2xl border-white/5">
                    <div className="px-12 py-6 border-b border-white/5 bg-white/[0.02] flex justify-between items-center"><h3 className="text-[11px] font-black uppercase tracking-[0.4em] text-zinc-500">Live Audit Trail</h3><Activity size={16} className="text-zinc-600"/></div>
                    <div className="divide-y divide-white/5 max-h-[180px] overflow-y-auto custom-scroll">
                        {logs.map((l, i) => (
                            <div key={l.id} className="px-12 py-6 flex justify-between items-center hover:bg-white/[0.01] transition-colors group cursor-pointer">
                                <div className="flex items-center gap-8">
                                    <div className={`w-3.5 h-3.5 rounded-full ${l.type==='success'?'bg-success shadow-[0_0_15px_#10b981]':'bg-purple-500 shadow-[0_0_15px_#8b5cf6]'}`}/>
                                    <p className="text-lg font-bold group-hover:text-white transition-colors text-white tracking-tight leading-none">{l.text}</p>
                                </div>
                                <span className="text-sm text-zinc-600 font-mono font-bold uppercase">{l.time}</span>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );

        const RitualView = ({ onComplete }) => {
            const [step, setStep] = useState(1);
            const [val, setVal] = useState(1200);
            const [processing, setProcessing] = useState(false);
            const handleExec = () => {
                setProcessing(true);
                setTimeout(() => { setProcessing(false); onComplete(val); }, 3000);
            };
            return (
                <div className="max-w-5xl mx-auto space-y-12 py-10 animate-in fade-in duration-700 text-left">
                    <div className="flex gap-10 text-[11px] font-black uppercase tracking-[0.4em] text-zinc-500 border-b border-white/5 pb-10">
                        <span className={step>=1?'text-purple-400':''}>01 Set Guardrail</span><ChevronRight size={14}/><span className={step>=2?'text-purple-400':''}>02 Logic Validation</span>
                    </div>
                    {step === 1 ? (
                        <div className="space-y-12 animate-in slide-in-from-bottom-8">
                            <h2 className="text-7xl font-black tracking-tighter leading-none text-white">Impose Law</h2>
                            <div className="nebula-card p-16 rounded-[4rem] space-y-16 shadow-2xl">
                                <div className="flex justify-between items-end">
                                    <label className="text-[11px] font-black text-zinc-500 uppercase tracking-[0.5em]">Monthly Limit (USD)</label>
                                    <span className="text-8xl font-mono font-black text-white tracking-tighter text-white leading-none">${val.toLocaleString()}</span>
                                </div>
                                <input type="range" min="100" max="25000" step="100" value={val} onChange={e => setVal(parseInt(e.target.value))} className="w-full h-2 bg-zinc-800 appearance-none rounded-full accent-purple-500 cursor-pointer mb-6"/>
                                <div className="grid grid-cols-3 gap-8">
                                    {['Standard', 'Hard-Lock', 'Community'].map((t, i) => (
                                        <button key={t} className={`py-8 rounded-3xl text-[11px] font-black uppercase tracking-[0.3em] transition-all ${i===1?'bg-purple-500/20 text-purple-400 border border-purple-400/40 shadow-xl':'border border-zinc-800 text-zinc-600 hover:border-zinc-500'}`}>{t}</button>
                                    ))}
                                </div>
                            </div>
                            <button onClick={() => setStep(2)} className="w-full py-10 bg-white text-black font-black uppercase tracking-[0.5em] text-xs rounded-full shadow-2xl hover:scale-[1.01] active:scale-95 transition-all">Verify Logic Proof</button>
                        </div>
                    ) : (
                        <div className="space-y-12 animate-in fade-in">
                            <h2 className="text-6xl font-black tracking-tighter text-white uppercase">Logic Audit</h2>
                            <div className="bg-[#020203] border border-white/10 rounded-[4rem] p-16 font-mono text-[13px] text-zinc-500 relative overflow-hidden shadow-inner">
                                <div className="scan-line absolute top-0 left-0"/>
                                <pre className="relative z-10 opacity-70 leading-[1.8] text-zinc-400">
{`// LIMIT_PROTOCOL_V6_CORE
contract spending_guardrail {
    uint256 public constant THRESHOLD = ${val} * 1e6;
    uint256 public constant DURATION = 30 days;
    address public immutable OWNER = msg.sender;

    function seal() external {
        // ENFORCE_DISCIPLINE_LAW
    }
}`}
                                </pre>
                            </div>
                            <div className="flex gap-8">
                                <button onClick={() => setStep(1)} className="px-16 py-8 nebula-card rounded-full text-[12px] font-black uppercase tracking-[0.4em] text-zinc-500 hover:text-white transition-all">Abort</button>
                                <button onClick={handleExec} className="flex-1 py-8 bg-purple-500 text-white font-black uppercase tracking-[0.4em] text-xs rounded-full active-glow flex items-center justify-center gap-5 transition-all shadow-2xl">
                                    {processing ? <><Loader2 className="animate-spin" /> Mining Block...</> : "Execute Genesis Seal"}
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const CommunityView = ({ onAction }) => {
            const [redeemed, setRedeemed] = useState(false);
            const [claiming, setClaiming] = useState(false);
            const [punishment, setPunishment] = useState(null);

            const handleClaim = () => {
                setClaiming(true);
                setTimeout(() => { setClaiming(false); setRedeemed(true); onAction('SBT Discipline Trophy Claimed'); }, 2000);
            };

            const rollPunishment = () => {
                const roll = PENALTIES[Math.floor(Math.random() * PENALTIES.length)];
                setPunishment(roll);
            };

            return (
                <div className="animate-in fade-in duration-700 space-y-16 pb-32 max-w-7xl mx-auto text-left py-4">
                    <h1 className="text-7xl font-black tracking-tighter text-white uppercase leading-none">Hive Mind</h1>
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 text-left">
                        <div id="collect-rewards" className="nebula-card p-14 bg-gradient-to-br from-success/5 to-transparent border-success/20 flex flex-col justify-between min-h-[550px] shadow-2xl relative overflow-hidden">
                            <div className="absolute top-0 right-0 p-10 opacity-5"><Gift size={160} /></div>
                            <div>
                                <h3 className="text-4xl font-black text-success mb-6 uppercase tracking-widest leading-none">Collect Reward</h3>
                                <p className="text-zinc-500 text-lg font-medium leading-snug mb-10 opacity-90">Honored your 30-day constraint? Mint your permanent Soulbound Trophy for honoring the protocol.</p>
                            </div>
                            
                            <div className="h-48 flex flex-col items-center justify-center glass-card bg-black/80 border-white/5 shadow-inner group overflow-hidden rounded-3xl">
                                {redeemed ? (
                                    <div className="text-center animate-in zoom-in-95">
                                        <Award className="text-success mx-auto mb-4 active-glow" size={48}/>
                                        <p className="text-2xl font-bold text-white uppercase tracking-widest">Seal #09 Earned</p>
                                        <p className="text-[10px] font-black text-zinc-600 mt-2 font-mono uppercase">Status: Soulbound</p>
                                    </div>
                                ) : (
                                    <div className="text-center">
                                        <p className="text-[10px] font-black text-zinc-600 uppercase tracking-[0.4em] mb-4">Pending Identity Asset</p>
                                        <p className="text-5xl font-mono font-black text-zinc-100 tracking-tighter uppercase">SBT_SEAL</p>
                                    </div>
                                )}
                            </div>

                            <button onClick={handleClaim} disabled={claiming || redeemed} className={`w-full py-8 rounded-2xl text-[11px] font-black uppercase tracking-[0.4em] transition-all active:scale-95 shadow-2xl mt-12 ${redeemed ? 'bg-zinc-800 text-zinc-500' : 'bg-success text-black hover:shadow-[0_0_25px_rgba(16,185,129,0.5)]'}`}>
                                {claiming ? "Generating Proof..." : redeemed ? "Trophy Registered" : "Claim Soulbound NFT"}
                            </button>
                        </div>

                        <div className="nebula-card p-14 flex flex-col justify-between border-danger/10 bg-danger/[0.01]">
                            <div>
                                <h3 className="text-4xl font-black text-danger mb-8 tracking-tighter uppercase leading-none">Oracle of Shame</h3>
                                <p className="text-zinc-500 font-medium leading-relaxed mb-12 opacity-90 text-xl">Protocol breaches trigger randomized penalties for the ledger. Discipline or consequence.</p>
                            </div>
                            <div className="h-48 flex flex-col items-center justify-center glass-card bg-black/60 border-danger/20 mb-10 p-10 text-center shadow-inner relative overflow-hidden rounded-3xl">
                                {punishment ? (
                                    <div className="animate-in slide-in-from-bottom-4 text-center">
                                        <div className="text-danger mx-auto mb-4">
                                            {punishment.type === "Financial" ? <Flame size={48}/> : punishment.type === "Social" ? <User size={48}/> : <FileClock size={48}/>}
                                        </div>
                                        <h4 className="text-2xl font-black text-white mb-3 uppercase tracking-widest">{punishment.type} Penalty</h4>
                                        <p className="text-zinc-400 font-medium text-base leading-snug">{punishment.task}</p>
                                    </div>
                                ) : (
                                    <p className="text-[11px] font-black text-zinc-600 uppercase tracking-widest italic opacity-50 text-center">Roll to see your potential fate...</p>
                                )}
                            </div>
                            <button onClick={rollPunishment} className="w-full py-8 border border-danger/30 rounded-2xl text-[11px] font-black uppercase tracking-widest text-danger hover:bg-danger hover:text-white transition-all active:scale-95 shadow-xl">Roll Consequence Oracle</button>
                        </div>
                    </div>
                </div>
            );
        };

        const VaultView = () => (
            <div className="space-y-16 animate-in fade-in duration-700 pb-32 w-full max-w-7xl mx-auto text-left py-4">
                <h1 className="text-7xl font-black tracking-tighter text-white uppercase leading-none">The Archive</h1>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12">
                    {SBT_ARCHIVE.map(n => (
                        <div key={n.id} className="nebula-card rounded-[4rem] p-2 hover:translate-y-[-15px] transition-all duration-700 group cursor-pointer shadow-2xl border-white/5">
                            <div className={`w-full aspect-square rounded-[3.8rem] bg-gradient-to-br ${n.color} p-14 flex flex-col justify-between relative overflow-hidden shadow-2xl`}>
                                <div className="absolute top-0 right-0 p-10 opacity-10 group-hover:scale-150 transition-transform duration-1000"><FoxIcon /></div>
                                <div className="glass-panel backdrop-blur-3xl bg-black/40 rounded-2xl p-4 w-fit text-[11px] font-black uppercase tracking-widest text-white border-white/20 shadow-xl uppercase">{n.tier}</div>
                                <div className="space-y-5">
                                    <p className="text-sm font-mono font-black text-white/50 tracking-[0.5em] uppercase leading-none">{n.id}</p>
                                    <h3 className="text-5xl font-black text-white leading-[0.85] tracking-tighter uppercase">{n.name}</h3>
                                </div>
                            </div>
                            <div className="p-12"><p className="text-zinc-500 text-base font-bold leading-relaxed opacity-80">{n.desc}</p></div>
                        </div>
                    ))}
                </div>
            </div>
        );

        // --- MAIN APP PAGES ---

        const LandingPage = ({ onStartSignup }) => {
            const ScrollSection = ({ children, className = "" }) => {
                const [isVisible, setIsVisible] = useState(false);
                const ref = useRef();
                useEffect(() => {
                    const observer = new IntersectionObserver(([entry]) => setIsVisible(entry.isIntersecting), { threshold: 0.15 });
                    if(ref.current) observer.observe(ref.current);
                    return () => observer.disconnect();
                }, []);
                return <section ref={ref} className={`min-h-screen flex flex-col justify-center items-center px-10 relative reveal ${isVisible?'active':''} ${className}`}>{children}</section>;
            };

            return (
                <div className="bg-[#010103] h-screen overflow-y-auto custom-scroll relative">
                    <ScrollSection className="text-center pt-20">
                        <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(139,92,246,0.1)_0%,_transparent_70%)] pointer-events-none" />
                        <div className="text-purple-500 mb-12 animate-pulse-soft"><Hexagon size={120} strokeWidth={1}/></div>
                        <h1 className="text-9xl md:text-[14vw] font-black leading-none tracking-tighter mb-8 bg-clip-text text-transparent bg-gradient-to-b from-white to-zinc-900 drop-shadow-2xl uppercase leading-none">LIMIT</h1>
                        <p className="text-zinc-500 uppercase tracking-[2.5em] text-xs font-black opacity-60 ml-10 text-center leading-none">Institutional Self-Restraint Terminal</p>
                        <div className="mt-40 flex flex-col items-center gap-6"><ChevronsDown size={32} className="text-zinc-800 animate-bounce"/></div>
                    </ScrollSection>

                    <ScrollSection className="bg-black/20 text-center">
                        <div className="max-w-6xl space-y-20">
                            <div className="text-purple-400 font-black text-sm uppercase tracking-[0.5em] mb-4 tracking-widest leading-none">01 THE COMMITMENT</div>
                            <h2 className="text-8xl font-black tracking-tight text-white leading-none">Spending is a bug. <br/><span className="text-gradient-purple">Code is the patch.</span></h2>
                            <p className="text-zinc-500 text-3xl font-semibold leading-relaxed max-w-4xl mx-auto opacity-90 tracking-tight">Decide your budget. Our smart contracts transform your intentions into immutable laws of code.</p>
                        </div>
                    </ScrollSection>

                    <ScrollSection className="bg-black border-t border-white/5 text-center">
                        <div className="max-w-6xl space-y-20">
                            <div className="text-gold font-black text-sm uppercase tracking-[0.5em] mb-4 tracking-widest leading-none">03 ASCEND</div>
                            <h2 className="text-7xl font-black text-white tracking-tighter leading-none uppercase leading-none">Ascend.</h2>
                            <p className="text-zinc-500 text-3xl font-semibold leading-relaxed max-w-4xl mx-auto opacity-90 tracking-tight">Successfully honoring your cycles mints permanent Soulbound Tokens that unlock community yield and status.</p>
                            <button onClick={onStartSignup} className="px-32 py-12 bg-white text-black font-black uppercase tracking-[0.5em] text-sm rounded-full hover:shadow-[0_0_150px_rgba(255,255,255,0.4)] hover:scale-110 active:scale-95 transition-all shadow-2xl">Establish Presence</button>
                        </div>
                    </ScrollSection>
                </div>
            );
        };

        const SignupPage = ({ onStartBoot, onBack }) => (
            <div className="h-screen flex items-center justify-center bg-[#010103] px-6">
                <div className="w-full max-w-xl nebula-card p-14 rounded-[4rem] text-center animate-in zoom-in-95 duration-500 shadow-2xl border-white/10 relative overflow-hidden">
                    <div className="scan-line absolute top-0 left-0 opacity-10" />
                    <button onClick={onBack} className="absolute top-10 left-10 text-zinc-600 hover:text-white transition-colors flex items-center gap-3 text-[10px] font-black uppercase tracking-widest"><ArrowLeft size={16}/> Back</button>
                    <div className="w-24 h-24 bg-purple-500/10 rounded-[2rem] flex items-center justify-center mx-auto mb-10 shadow-[0_0_60px_rgba(139,92,246,0.15)]"><Fingerprint size={48} className="text-purple-400"/></div>
                    <h2 className="text-5xl font-black text-white mb-12 tracking-tighter text-center leading-none uppercase">Identity Matrix</h2>
                    <div className="space-y-6 mb-12">
                        <input type="text" placeholder="Identity callsign" className="w-full py-6 px-8 rounded-2xl text-lg font-bold bg-white/5 border border-white/10 text-white outline-none focus:border-purple-500 transition-all shadow-inner placeholder:text-zinc-800" />
                        <input type="email" placeholder="Encrypted relay channel" className="w-full py-6 px-8 rounded-2xl text-lg font-bold bg-white/5 border border-white/10 text-white outline-none focus:border-purple-500 transition-all shadow-inner placeholder:text-zinc-800" />
                    </div>
                    <button onClick={onStartBoot} className="w-full py-8 bg-white text-black font-black uppercase tracking-[0.5em] text-xs rounded-full hover:shadow-[0_20px_60px_rgba(255,255,255,0.15)] transition-all active:scale-95 shadow-2xl">Establish Matrix Presence</button>
                </div>
            </div>
        );

        const BootingPage = ({ onComplete }) => {
            const [terminal, setTerminal] = useState([]);
            useEffect(() => {
                const msgs = ["Decrypting secure link...", "Handshaking local nodes...", "Verifying matrix provenance...", "Mapping shards to Block #19,402,111...", "Identity matrix sealed.", "Access Granted."];
                msgs.forEach((m, i) => setTimeout(() => setTerminal(p => [...p, m]), i*900));
                setTimeout(onComplete, 6000);
            }, []);
            return (
                <div className="h-screen flex items-center justify-center bg-[#010103] px-6">
                    <div className="w-full max-w-2xl nebula-card p-14 rounded-[4rem] font-mono text-base text-purple-400 space-y-6 shadow-2xl relative overflow-hidden border-white/10">
                        <div className="absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-transparent via-purple-500 to-transparent opacity-40"/>
                        {terminal.map((m, i) => <div key={i} className="animate-in slide-in-from-left-2 opacity-90 leading-relaxed font-bold tracking-tight tracking-widest">{`> ${m}`}</div>)}
                        <div className="w-3 h-6 bg-purple-500 animate-pulse inline-block align-middle ml-2 shadow-[0_0_10px_#8b5cf6]" />
                    </div>
                </div>
            );
        };

        // --- ROOT APP ---
        function App() {
            const [view, setView] = useState('landing');
            const [activeTab, setActiveTab] = useState('dashboard');
            const [stats, setStats] = useState({ tvl: 14.42, score: 94.2 });
            const [logs, setLogs] = useState(INITIAL_LOGS);
            const [showAssetPanel, setShowAssetPanel] = useState(false);

            const handleSeal = (val) => {
                setStats(p => ({ tvl: p.tvl + (val/2421), score: Math.min(100, p.score+0.2) }));
                setLogs([{ id: Date.now(), text: `Law Sealed: $${val} limit active`, time: "Now", type: 'success', hash: generateHash().slice(0,24) }, ...logs]);
                setActiveTab('dashboard');
            };

            const addLog = (txt) => {
                setLogs([{ id: Date.now(), text: txt, time: "Now", type: 'neutral', hash: generateHash().slice(0,24) }, ...logs]);
            };

            return (
                <div className="limit-app min-h-screen bg-[#010103] text-zinc-100 selection:bg-purple-500/40">
                    <CustomCursor />
                    
                    {view === 'landing' && <LandingPage onStartSignup={() => setView('signup')} />}
                    {view === 'signup' && <SignupPage onStartBoot={() => setView('boot')} onBack={() => setView('landing')} />}
                    {view === 'boot' && <BootingPage onComplete={() => setView('app')} />}
                    
                    {view === 'app' && (
                        <div className="h-screen flex overflow-hidden animate-in fade-in duration-1000">
                            
                            {/* NAVIGATION */}
                            <aside className="w-[100px] lg:w-[120px] border-r border-white/5 flex flex-col bg-[#050507] z-50 shadow-2xl items-center py-12 gap-12 shrink-0">
                                <div className="text-purple-400 cursor-pointer hover:scale-110 transition-transform active:scale-95" onClick={() => setActiveTab('dashboard')}>
                                    <Hexagon size={44} />
                                </div>
                                <nav className="flex-1 space-y-10 flex flex-col items-center">
                                    {[
                                        { id: 'dashboard', icon: <Activity size={30}/>, label: 'Control' }, 
                                        { id: 'ritual', icon: <Zap size={30}/>, label: 'Deploy' }, 
                                        { id: 'consensus', icon: <Users size={30}/>, label: 'Hive' }, 
                                        { id: 'vault', icon: <Shield size={30}/>, label: 'Archive' }
                                    ].map(item => (
                                        <button 
                                            key={item.id} 
                                            onClick={() => setActiveTab(item.id)} 
                                            className={`p-5 rounded-[1.5rem] transition-all duration-500 relative group ${activeTab === item.id ? 'bg-purple-500 text-white shadow-lg active-glow' : 'text-zinc-600 hover:text-white hover:bg-white/5'}`}
                                        >
                                            {item.icon}
                                            <span className="absolute left-[130%] bg-zinc-900 border border-white/10 text-[9px] font-black uppercase tracking-widest px-4 py-2 rounded-xl opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-[100] shadow-2xl border border-white/5">
                                                {item.label}
                                            </span>
                                        </button>
                                    ))}
                                </nav>
                                <button onClick={() => setShowAssetPanel(!showAssetPanel)} className={`p-6 rounded-[2.2rem] transition-all duration-500 group relative border-2 ${showAssetPanel ? 'bg-purple-500 border-purple-400 active-glow' : 'bg-white/5 border-white/5 hover:border-purple-500/50 shadow-2xl'}`}>
                                    <FoxIcon />
                                    <span className="absolute left-[130%] bg-zinc-900 border border-white/10 text-[9px] font-black uppercase tracking-widest px-4 py-2 rounded-xl opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap z-[100] shadow-2xl border border-white/5">Identity Vault</span>
                                </button>
                                <button onClick={() => setView('landing')} className="p-6 rounded-3xl text-zinc-800 hover:text-danger hover:bg-danger/10 transition-all group relative">
                                    <RefreshCcw size={30} />
                                    <span className="absolute left-[130%] bg-black text-[9px] font-black uppercase tracking-widest px-4 py-2 rounded-xl opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity whitespace-nowrap shadow-2xl border border-white/10">Purge Session</span>
                                </button>
                            </aside>

                            {showAssetPanel && <AssetPanel onClose={() => setShowAssetPanel(false)} onAction={addLog} />}

                            <main className="flex-1 flex flex-col bg-[#030005] relative overflow-hidden transition-all duration-700">
                                <div className="ticker-wrap h-12 flex items-center bg-purple-500/5 border-b border-white/5">
                                    <div className="ticker-move flex gap-32 items-center px-10">
                                        {[...MARKET_DATA, ...MARKET_DATA].map((m, i) => (
                                            <div key={i} className="flex items-center gap-6 text-[11px] font-black uppercase tracking-widest opacity-80 cursor-pointer hover:opacity-100 transition-opacity">
                                                <span className="text-zinc-600">{m.label}</span>
                                                <span className="text-white font-mono font-black tracking-tighter">${m.val}</span>
                                                <span className={m.change.startsWith('+')?'text-success':'text-danger'}>{m.change}</span>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                <header className="h-28 border-b border-white/5 flex items-center justify-between px-16 glass-panel z-40 bg-black/60 backdrop-blur-3xl shrink-0">
                                    <div className="flex gap-20 items-center text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600">
                                        <div className="flex items-center gap-5">
                                            <span className="w-2 h-2 rounded-full bg-purple-500 animate-pulse shadow-[0_0_15px_#8b5cf6]" />
                                            NODE <span className="text-white font-mono font-black text-sm tracking-tighter">#19,402,111</span>
                                        </div>
                                        <div className="hidden sm:flex items-center gap-5 border-l border-white/5 pl-16 text-left">
                                            GAS <span className="text-success font-mono font-black text-sm tracking-tighter">14 GWEI</span>
                                        </div>
                                    </div>
                                    <div className="flex items-center gap-10">
                                        <button className="p-4 nebula-card rounded-2xl hover:bg-white/10 transition-all relative border-white/5 group border-2 border-purple-500/5 active:scale-95 shadow-xl">
                                            <Bell size={20} className="text-zinc-500 group-hover:text-white" />
                                            <div className="absolute top-3.5 right-3.5 w-2 h-2 bg-purple-500 rounded-full animate-ping shadow-[0_0_10px_#8b5cf6]" />
                                        </button>
                                        <div className="h-8 w-px bg-white/10" />
                                        <div className="text-[11px] font-black text-zinc-600 uppercase tracking-[0.4em] hidden md:block uppercase">Verified Terminus</div>
                                    </div>
                                </header>

                                <div className="flex-1 overflow-y-auto p-16 xl:p-24 custom-scroll relative">
                                    {activeTab === 'dashboard' && <DashboardView stats={stats} logs={logs} onNavigate={setActiveTab} />}
                                    {activeTab === 'ritual' && (
                                        <div className="space-y-32">
                                            <RitualView onComplete={handleSeal} />
                                            <div className="animate-in fade-in duration-1000 space-y-12 max-w-5xl mx-auto py-20 text-left">
                                                <h2 className="text-5xl font-black text-white tracking-tighter leading-none uppercase">Privacy Shield</h2>
                                                <div className="glass-card p-16 rounded-[4rem] flex flex-col items-center justify-center bg-black/40 border-white/5 relative overflow-hidden shadow-2xl">
                                                    <div className="absolute inset-0 scan-line" />
                                                    <svg width="600" height="300" viewBox="0 0 600 300" className="relative z-10 scale-90 lg:scale-100">
                                                        <rect x="50" y="100" width="120" height="100" rx="20" className="fill-white/5 stroke-white/10" />
                                                        <text x="110" y="155" textAnchor="middle" className="fill-zinc-500 font-bold text-[10px] uppercase tracking-widest font-mono">My Data</text>
                                                        <circle cx="300" cy="150" r="80" className="fill-purple-500/10 stroke-purple-500 stroke-[2px] pulse-soft" />
                                                        <text x="300" y="155" textAnchor="middle" className="fill-white font-black text-[12px] uppercase tracking-[0.2em] font-mono">ZK SHIELD</text>
                                                        <rect x="430" y="100" width="120" height="100" rx="20" className="fill-white/5 stroke-success/20" />
                                                        <text x="490" y="155" textAnchor="middle" className="fill-success font-bold text-[10px] uppercase tracking-widest font-mono">Validated</text>
                                                        <path d="M170 150 L220 150" className="zk-wire stroke-zinc-700 fill-none" strokeWidth="2" />
                                                        <path d="M380 150 L430 150" className="zk-wire stroke-success/40 fill-none" strokeWidth="2" />
                                                    </svg>
                                                    <div className="grid grid-cols-3 gap-24 mt-12 text-center w-full max-w-3xl pt-10 border-t border-white/5">
                                                        <div><p className="text-[10px] font-bold text-zinc-600 uppercase tracking-widest mb-3">Bank Logs</p><p className="text-xl font-bold text-white uppercase leading-none">Encrypted</p></div>
                                                        <div><p className="text-[10px] font-bold text-zinc-600 uppercase tracking-widest mb-3">Integrity</p><p className="text-xl font-bold text-white uppercase leading-none">Proven</p></div>
                                                        <div><p className="text-[10px] font-bold text-zinc-600 uppercase tracking-widest mb-3">Privacy</p><p className="text-xl font-bold text-success font-mono uppercase leading-none">100.0%</p></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                    {activeTab === 'consensus' && <CommunityView onAction={addLog} />}
                                    {activeTab === 'vault' && <VaultView />}
                                </div>
                            </main>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
